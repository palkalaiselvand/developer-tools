@page "/"

<div class="max-w-screen-xl mx-auto space-y-8">
    <div class="text-center space-y-3">
        <h1 class="text-4xl font-bold text-gray-800">Developer Tools</h1>
        <p class="text-lg md:text-xl text-gray-600">
            A growing collection of everyday helpers for busy developers.
        </p>
    </div>

    <div class="bg-white rounded-lg shadow-md p-6">
        <label for="tool-search" class="block text-sm font-semibold text-gray-700 uppercase tracking-wide mb-2">
            Find a tool
        </label>
        <div class="flex items-center gap-3 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus-within:border-blue-400">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd"
                      d="M12.9 14.32a8 8 0 111.414-1.414l4.387 4.387a1 1 0 01-1.414 1.414l-4.387-4.387zM14 8a6 6 0 11-12 0 6 6 0 0112 0z"
                      clip-rule="evenodd" />
            </svg>
            <input id="tool-search"
                   @bind="searchTerm"
                   @bind:event="oninput"
                   type="search"
                   placeholder="Search by name or description..."
                   class="w-full bg-transparent focus:outline-none text-gray-700" />
        </div>
        <p class="text-xs text-gray-500 mt-2">
            Type to quickly filter the tools below. New additions are highlighted for easy discovery.
        </p>
        <div class="mt-4">
            <span class="block text-xs font-semibold uppercase tracking-wide text-gray-500">Filter by category</span>
            <div class="flex flex-wrap gap-2 mt-2">
                <button class="@($"px-3 py-1 rounded-full border text-sm transition-colors {CategoryButtonClasses("All")}")"
                        @onclick="SelectAllCategory">
                    All
                </button>
                @foreach (var category in DistinctCategories)
                {
                    <button class="@($"px-3 py-1 rounded-full border text-sm transition-colors {CategoryButtonClasses(category)}")"
                            @onclick="() => SelectCategory(category)">
                        @category
                    </button>
                }
            </div>
        </div>
    </div>

    @if (!FilteredTools.Any())
    {
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold text-gray-800">All tools</h2>
            <div class="bg-white border border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500">
                No tools matched your search. Try a different keyword or clear the filters.
            </div>
        </section>
    }
    else
    {
        @if (PinnedTools.Any())
        {
            <section class="space-y-4">
                <div class="flex items-center gap-3">
                    <h2 class="text-2xl font-semibold text-gray-800">Quick access</h2>
                    <span class="text-xs uppercase tracking-wide px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full">Pinned</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    @foreach (var tool in PinnedTools)
                    {
                        <NavLink class="tool-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow"
                                 href="@tool.Route">
                            <div class="p-6 flex flex-col h-full">
                                <div class="flex items-start gap-4 mb-4">
                                    <div class="@($"w-12 h-12 {tool.IconClasses} rounded-lg flex items-center justify-center")">
                                        @((MarkupString)tool.IconSvg)
                                    </div>
                                    <div class="flex-1 space-y-1">
                                        <div class="flex items-center gap-2 flex-wrap">
                                            <h3 class="text-xl font-semibold text-gray-800">@tool.Title</h3>
                                            <span class="text-xs font-semibold uppercase tracking-wide px-2 py-0.5 rounded-full bg-gray-100 text-gray-600">
                                                @tool.Category
                                            </span>
                                            @if (!string.IsNullOrWhiteSpace(tool.Badge))
                                            {
                                                <span class="@($"text-xs font-semibold uppercase tracking-wide px-2 py-0.5 rounded-full {tool.BadgeClasses}")">
                                                    @tool.Badge
                                                </span>
                                            }
                                        </div>
                                        <p class="text-sm text-gray-600 leading-relaxed">@tool.Description</p>
                                    </div>
                                </div>
                                <div class="mt-auto text-sm text-blue-600 font-medium flex items-center gap-1">
                                    <span>Open tool</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5H5.25A2.25 2.25 0 003 6.75v11a2.25 2.25 0 002.25 2.25h11a2.25 2.25 0 002.25-2.25V10.5m-6-6h6m0 0v6m0-6L10.5 15" />
                                    </svg>
                                </div>
                            </div>
                        </NavLink>
                    }
                </div>
            </section>
        }

        @if (RegularTools.Any())
        {
            <section class="space-y-6 mt-10">
                <h2 class="text-2xl font-semibold text-gray-800">All tools</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    @foreach (var tool in RegularTools)
                    {
                        <NavLink class="tool-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow"
                                 href="@tool.Route">
                            <div class="p-6 flex flex-col h-full">
                                <div class="flex items-start gap-4 mb-4">
                                    <div class="@($"w-12 h-12 {tool.IconClasses} rounded-lg flex items-center justify-center")">
                                        @((MarkupString)tool.IconSvg)
                                    </div>
                                    <div class="flex-1 space-y-1">
                                        <div class="flex items-center gap-2 flex-wrap">
                                            <h3 class="text-xl font-semibold text-gray-800">@tool.Title</h3>
                                            <span class="text-xs font-semibold uppercase tracking-wide px-2 py-0.5 rounded-full bg-gray-100 text-gray-600">
                                                @tool.Category
                                            </span>
                                            @if (!string.IsNullOrWhiteSpace(tool.Badge))
                                            {
                                                <span class="@($"text-xs font-semibold uppercase tracking-wide px-2 py-0.5 rounded-full {tool.BadgeClasses}")">
                                                    @tool.Badge
                                                </span>
                                            }
                                        </div>
                                        <p class="text-sm text-gray-600 leading-relaxed">@tool.Description</p>
                                    </div>
                                </div>
                                <div class="mt-auto text-sm text-blue-600 font-medium flex items-center gap-1">
                                    <span>Open tool</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5H5.25A2.25 2.25 0 003 6.75v11a2.25 2.25 0 002.25 2.25h11a2.25 2.25 0 002.25-2.25V10.5m-6-6h6m0 0v6m0-6L10.5 15" />
                                    </svg>
                                </div>
                            </div>
                        </NavLink>
                    }
                </div>
            </section>
        }
    }
</div>

@code {
    private string? searchTerm;
    private string selectedCategory = "All";

    private IEnumerable<ToolCard> FilteredTools => toolCards
        .Where(MatchesCategory)
        .Where(MatchesSearch);

    private IEnumerable<ToolCard> PinnedTools => FilteredTools
        .Where(tool => tool.IsPinned)
        .OrderBy(tool => tool.Title);

    private IEnumerable<ToolCard> RegularTools => FilteredTools
        .Where(tool => !tool.IsPinned)
        .OrderBy(tool => tool.Title);

    private IEnumerable<string> DistinctCategories => toolCards
        .Select(tool => tool.Category)
        .Distinct(StringComparer.OrdinalIgnoreCase)
        .OrderBy(category => category);

    private void SelectCategory(string category) => selectedCategory = category;
    private void SelectAllCategory() => SelectCategory("All");

    private bool MatchesCategory(ToolCard tool) =>
        selectedCategory == "All" || tool.Category.Equals(selectedCategory, StringComparison.OrdinalIgnoreCase);

    private bool MatchesSearch(ToolCard tool) =>
        string.IsNullOrWhiteSpace(searchTerm) ||
        tool.Title.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||
        tool.Description.Contains(searchTerm, StringComparison.OrdinalIgnoreCase);

    private string CategoryButtonClasses(string category)
    {
        var isActive = selectedCategory.Equals(category, StringComparison.OrdinalIgnoreCase) ||
                       (category == "All" && selectedCategory == "All");
        return isActive
            ? "bg-blue-600 text-white border-blue-600"
            : "bg-white text-gray-600 border-gray-300 hover:border-blue-400 hover:text-blue-600";
    }

    private readonly List<ToolCard> toolCards = new()
    {
        new ToolCard(
            Title: "Replace Line Breaks",
            Description: "Convert line separated content into SQL statements, comma separated lists, and more.",
            Route: "replacelinebreaks",
            IconClasses: "bg-blue-100 text-blue-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z\" /></svg>",
            Category: "SQL",
            IsPinned: true),
        new ToolCard(
            Title: "SQL Formatter",
            Description: "Reformat messy SQL with clause breaks, indentation, and keyword casing in one click.",
            Route: "sqlformatter",
            IconClasses: "bg-sky-100 text-sky-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 6.75h15m-15 4.5h9m-9 4.5h15\" /></svg>",
            Category: "SQL",
            Badge: "New",
            BadgeClasses: "bg-sky-100 text-sky-700",
            IsPinned: true),
        new ToolCard(
            Title: "Tabular Data Formatter",
            Description: "Round-trip tables between Markdown, SQL, JSON, and CSV with smart delimiter detection.",
            Route: "tabulardata",
            IconClasses: "bg-teal-100 text-teal-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 6.75h18M3 12h18M3 17.25h18M9 6.75v10.5m6-10.5v10.5\" /></svg>",
            Category: "Excel",
            Badge: "Updated",
            BadgeClasses: "bg-teal-100 text-teal-700",
            IsPinned: true),
        new ToolCard(
            Title: "HTTP Status Explorer",
            Description: "Look up status codes, reason phrases, and troubleshooting guidance fast.",
            Route: "httpstatuses",
            IconClasses: "bg-amber-100 text-amber-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M11.25 11.25h1.5v5.25h-1.5m0-7.5h1.5M12 21a9 9 0 100-18 9 9 0 000 18z\" /></svg>",
            Category: "HTTP",
            Badge: "New",
            BadgeClasses: "bg-amber-100 text-amber-700"),
        new ToolCard(
            Title: "String Formatter",
            Description: "Format JSON, SQL and text, switch casing, and encode or decode Base64/URLs.",
            Route: "stringformatter",
            IconClasses: "bg-purple-100 text-purple-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 4.5h18M3 9h18M9 13.5h6M4.5 18h15\" /></svg>",
            Category: "Text"),
        new ToolCard(
            Title: "JSON Edit/Sort",
            Description: "Sort JSON objects by property, remove fields, and tidy payloads for sharing.",
            Route: "jsoneditsort",
            IconClasses: "bg-yellow-100 text-yellow-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z\" /></svg>",
            Category: "Text"),
        new ToolCard(
            Title: "JSON to Code",
            Description: "Generate C# models and TypeScript interfaces directly from pasted JSON payloads.",
            Route: "jsontocode",
            IconClasses: "bg-cyan-100 text-cyan-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8.25 6.75l-3.5 3.5 3.5 3.5m7.5-7l3.5 3.5-3.5 3.5M13.5 5.25l-3 13.5\" /></svg>",
            Category: "Generators",
            Badge: "New",
            BadgeClasses: "bg-cyan-100 text-cyan-700"),
        new ToolCard(
            Title: "Regex Tester",
            Description: "Experiment with .NET regular expressions, view captured groups, and test replacements.",
            Route: "regextester",
            IconClasses: "bg-orange-100 text-orange-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8.25 6.75h9m-9 3H12m-5.25 3h9m-9 3H12m7.5-9L21 9.75m-1.5 3L21 15.75m-1.5 3L21 21\" /></svg>",
            Category: "Text"),
        new ToolCard(
            Title: "Compare Tool",
            Description: "Review differences between two snippets with an interactive diff editor.",
            Route: "compare",
            IconClasses: "bg-red-100 text-red-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3\" /></svg>",
            Category: "Utilities"),
        new ToolCard(
            Title: "GUID Helpers",
            Description: "Generate GUIDs and convert between GUID values and long/int representations.",
            Route: "guidhelpers",
            IconClasses: "bg-green-100 text-green-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5\" /></svg>",
            Category: "Utilities"),
        new ToolCard(
            Title: "Hash & Checksum",
            Description: "Compute MD5, SHA, and Base64 digests without sending data off device.",
            Route: "hashing",
            IconClasses: "bg-slate-100 text-slate-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 3l8 4v5c0 5-3.5 9-8 9s-8-4-8-9V7l8-4z\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9 12l2 2 4-4\" /></svg>",
            Category: "Security",
            Badge: "New",
            BadgeClasses: "bg-slate-100 text-slate-700"),
        new ToolCard(
            Title: "Unix Timestamp Converter",
            Description: "Quickly convert between Unix timestamps and human-readable dates in UTC or local time.",
            Route: "unixtimestamp",
            IconClasses: "bg-indigo-100 text-indigo-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v6l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>",
            Category: "Utilities"),
        new ToolCard(
            Title: "Time Zone Converter",
            Description: "Translate timestamps across UTC, US, and international zones with daylight-saving context.",
            Route: "timezone",
            IconClasses: "bg-lime-100 text-lime-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 21a9 9 0 100-18 9 9 0 000 18z\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 3c1.657 1.657 3 4.343 3 9s-1.343 7.343-3 9m0-18c-1.657 1.657-3 4.343-3 9s1.343 7.343 3 9\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 9h15M4.5 15h15\" /></svg>",
            Category: "Date & Time",
            Badge: "New",
            BadgeClasses: "bg-lime-100 text-lime-700"),
        new ToolCard(
            Title: "JWT Decoder",
            Description: "Decode and pretty-print JSON Web Tokens without sending data to a server.",
            Route: "jwtdecoder",
            IconClasses: "bg-emerald-100 text-emerald-600",
            IconSvg: "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 10.5V6.75A2.25 2.25 0 0014.25 4.5h-9A2.25 2.25 0 003 6.75v10.5A2.25 2.25 0 005.25 19.5h9a2.25 2.25 0 002.25-2.25V13.5m0-3l3 3m-3-3l-3 3\" /></svg>",
            Category: "HTTP"),
    };

    private record ToolCard(
        string Title,
        string Description,
        string Route,
        string IconClasses,
        string IconSvg,
        string Category,
        string? Badge = null,
        string? BadgeClasses = null,
        bool IsPinned = false);
}
